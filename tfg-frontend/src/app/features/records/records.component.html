<div class="dashboard-container">
  @if (role == 'ADMIN') {
    <app-admin-sidebar
      [checkInDone]="checkInDone"
      [fichajeStatus]="fichajeStatus"
      [fichar]="fichar.bind(this)"
      [logout]="logout.bind(this)">
    </app-admin-sidebar>
  }

  @if (role == 'EMPLOYEE') {
    <app-employee-sidebar
      [checkInDone]="checkInDone"
      [fichajeStatus]="fichajeStatus"
      [fichar]="fichar.bind(this)"
      [logout]="logout.bind(this)">
    </app-employee-sidebar>
  }

  <main class="flex-grow-1 p-4">
    <h2 class="text-center mb-4">Mis registros</h2>

    @if (errorMessage) {
    <div class="alert alert-danger">{{ errorMessage }}</div>
    }

    <div class="table-responsive shadow rounded">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark text-center">
          <tr>
            <th>Fecha</th>
            <th>Check-in</th>
            <th>Check-out</th>
            <th id="acciones1">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of paginatedRecords">
            <td>{{ record.checkIn | date: 'dd/MM/yyyy' }}</td>
            <td>{{ record.checkIn | date: 'HH:mm' }}</td>
            <td>{{ record.checkOut ? (record.checkOut | date: 'HH:mm') : 'â€”' }}</td>
            <td id="acciones" class="text-center">
              <button id="botonModificar" class="btn btn-sm btn-outline-primary">Modificar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <nav *ngIf="totalPages > 1" class="d-flex justify-content-center mt-3">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="changePage(currentPage - 1)">Anterior</button>
        </li>
        <li class="page-item" *ngFor="let page of pagesArray" [class.active]="currentPage === page">
          <button class="page-link" (click)="changePage(page)">{{ page }}</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="changePage(currentPage + 1)">Siguiente</button>
        </li>
      </ul>
    </nav>
  </main>
</div>
